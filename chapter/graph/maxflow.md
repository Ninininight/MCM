![[Pasted image 20251109162659.png]]

```matlab
%% 图论高级操作：从邻接矩阵创建赋权图并计算最大流

% 1. 初始化一个 8x8 的零矩阵，作为邻接矩阵 A
a = zeros(8); 

% 2. 赋值：设置矩阵 a 中非零元素的值（即边的权重）
% a(行索引, 列索引) = 权重
a(1, [2:4]) = [6, 4, 5];    % 从节点 1 到 2, 3, 4 的边，权重分别为 6, 4, 5
a(2, [3, 5, 6]) = [3, 9, 9];
a(3, [4:7]) = [5, 6, 7, 3];
a(4, [3, 7]) = [2, 5];
a(5, 8) = 12;               % 从节点 5 到节点 8 的边，权重为 12 (这是汇点)
a(6, [5, 8]) = [8, 10];
a(7, [6, 8]) = [4, 15];

%% 3. 创建有向图对象和绘图
% G = digraph(a)：使用邻接矩阵 a 创建赋权有向图
% H = plot(...): 将 GraphPlot 对象句柄赋值给 H，方便后续高亮操作
G = digraph(a); 
H = plot(G, 'EdgeLabel', G.Edges.Weight); % 绘制图并显示边的权重

%% 4. 计算最大流
% [M, F] = maxflow(G, 源点, 汇点)
% G: 图对象
% 1: 源点 (Source Node)
% 8: 汇点 (Sink Node)
[M, F] = maxflow(G, 1, 8); % 使用默认的 searchtrees 方法求最大流

disp(['从节点 1 到节点 8 的最大流 M = ', num2str(M)]);

```